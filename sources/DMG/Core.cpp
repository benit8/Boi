/*
** Boi, 2020
** DMG / Core.cpp
*/

#include "Core.hpp"

////////////////////////////////////////////////////////////////////////////////

namespace DMG
{

////////////////////////////////////////////////////////////////////////////////

Core::Core(MappedFile&& rom_file)
: m_mmu((const u8*)rom_file.data(), rom_file.size())
, m_cpu(m_mmu)
{}

////////////////////////////////////////////////////////////////////////////////

void Core::run()
{
	m_running = true;

	while (m_running) {
		m_cpu.execNextInstruction();
		dump();
	}
}

void Core::dump() const
{
	m_cpu.dump();
}

////////////////////////////////////////////////////////////////////////////////

}